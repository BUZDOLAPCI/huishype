appId: nl.huishype.app
---
# 02-feed.yaml â€” Feed Tab
# Tests feed filters, property cards, scrolling, and card tap navigation.
# This is a sub-flow; app is on the Map tab.

# Navigate to Feed tab
- tapOn: "Feed"

# Wait for feed to load - filter chips should be visible
# Default active filter is "Trending" (no "All" chip exists)
- extendedWaitUntil:
    visible: "Trending"
    timeout: 30000

# Assert filter chips visible
- assertVisible: "Trending"
- assertVisible: "Recent"
- assertVisible: "Controversial"
- assertVisible: "Price Mismatch"

- takeScreenshot: maestro-screenshots/full_flow_02_feed_filters

# Verify property cards are displayed (guesses count is always present)
- assertVisible:
    text: ".*guesses.*"

# Tap "Recent" filter to test filter switching
- tapOn: "Recent"
- waitForAnimationToEnd

# Verify cards still render after filter change
- assertVisible:
    text: ".*guesses.*"
    optional: true

- takeScreenshot: maestro-screenshots/full_flow_02_recent_filter

# Switch back to "Trending" filter
- tapOn: "Trending"
- waitForAnimationToEnd

# Scroll down to test pagination
- scroll
- takeScreenshot: maestro-screenshots/full_flow_02_scrolled_down

# Scroll back up
- swipe:
    direction: DOWN
    duration: 500
- swipe:
    direction: DOWN
    duration: 500
- swipe:
    direction: DOWN
    duration: 500
- waitForAnimationToEnd

# Tap on a property card to view details
- tapOn:
    point: "50%,40%"
    optional: true
- waitForAnimationToEnd

- takeScreenshot: maestro-screenshots/full_flow_02_feed_card_tap

# If property detail screen appeared, verify it has elements
- assertVisible:
    text: "Save"
    optional: true
- assertVisible:
    text: "Share"
    optional: true

# Navigate back (Android back button)
- pressKey: back
- waitForAnimationToEnd

# Wait for feed to be visible again
- extendedWaitUntil:
    visible: "Trending"
    timeout: 10000

# Switch back to Map tab
- tapOn: "Map"
- extendedWaitUntil:
    visible: "Zoom.*"
    timeout: 10000
