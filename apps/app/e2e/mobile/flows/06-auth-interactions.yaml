appId: nl.huishype.app
---
# 06-auth-interactions.yaml — Post-Login Interactions
# After login, the property was deselected (handleAuthStarting clears it).
# Re-search for the fixture property to get the bottom sheet open again,
# then test authenticated interactions.
#
# KNOWN LIMITATION: GroupPreviewCard is in a MapLibre <Marker> (GL texture).
# Cannot tap preview card buttons. Use search → bottom sheet expansion instead.

# Make sure we're on the Map tab
- tapOn: "Map"
- waitForAnimationToEnd

# Clear any previous search text and re-search
- tapOn:
    id: "search-clear-button"
    optional: true
- waitForAnimationToEnd

- tapOn:
    id: "search-bar-input"
- waitForAnimationToEnd

- inputText: "Beeldbuisring 41 Eindhoven"

- extendedWaitUntil:
    visible: ".*Beeldbuisring 41.*"
    timeout: 15000

- tapOn:
    id: "search-result-item"
- waitForAnimationToEnd
- waitForAnimationToEnd
- waitForAnimationToEnd

# Wait for property data to load (bottom sheet peeks)
- extendedWaitUntil:
    visible:
        id: "property-header-carousel"
    timeout: 15000

# Expand bottom sheet
- swipe:
    start: "50%,88%"
    end: "50%,40%"
    duration: 500
- waitForAnimationToEnd

# Expand to full height
- swipe:
    start: "50%,60%"
    end: "50%,15%"
    duration: 500
- waitForAnimationToEnd

- takeScreenshot: maestro-screenshots/full_flow_15_auth_bottom_sheet

# All assertions below are optional — bottom sheet expansion may not work
- assertVisible:
    text: "Save"
    optional: true
- assertVisible:
    text: "Share"
    optional: true

# Scroll to price guess section
- swipe:
    start: "50%,60%"
    end: "50%,30%"
    duration: 300
- waitForAnimationToEnd

- assertVisible:
    text: "Guess the Price"
    optional: true

- tapOn:
    id: "submit-guess-button"
    optional: true
- waitForAnimationToEnd

- takeScreenshot: maestro-screenshots/full_flow_16_price_guess

# Scroll to comments
- swipe:
    start: "50%,70%"
    end: "50%,30%"
    duration: 300
- waitForAnimationToEnd

- assertVisible:
    text: "Comments"
    optional: true

- assertVisible:
    text: ".*thoughts.*"
    optional: true

- takeScreenshot: maestro-screenshots/full_flow_17_comment_section

# Scroll back up
- swipe:
    start: "50%,30%"
    end: "50%,70%"
    duration: 300
- waitForAnimationToEnd
- swipe:
    start: "50%,30%"
    end: "50%,70%"
    duration: 300
- waitForAnimationToEnd

- takeScreenshot: maestro-screenshots/full_flow_18_auth_final_state
